# Отладка регистрации

## Что было добавлено:

1. ✅ Подробное логирование в консоль браузера
2. ✅ Обработка ошибок с детальными сообщениями
3. ✅ Проверка статуса HTTP ответа
4. ✅ Индикатор загрузки при регистрации

## Как проверить, что происходит:

### 1. Откройте консоль браузера:
   - Нажмите **F12** или **Ctrl+Shift+I**
   - Перейдите на вкладку **Console**

### 2. Попробуйте зарегистрироваться:
   - Заполните форму регистрации
   - Нажмите "ЗАРЕГИСТРИРОВАТЬСЯ"
   - Смотрите сообщения в консоли

### 3. Что искать в консоли:

**Если всё работает:**
```
=== НАЧАЛО РЕГИСТРАЦИИ ===
Данные формы: {username: "...", password: "***", email: "..."}
Загрузка пользователей с сервера...
Отправка запроса на: /.netlify/functions/saveUser
Статус ответа: 200 OK
Ответ от сервера: {success: true, ...}
Пользователь сохранен на сервер: ...
=== РЕГИСТРАЦИЯ ЗАВЕРШЕНА ===
```

**Если есть ошибки:**
- `Ошибка HTTP: 500` - проблема на сервере (проверьте Netlify Functions)
- `Ошибка HTTP: 404` - функция не найдена (проверьте деплой)
- `Failed to fetch` - проблема с сетью или CORS
- `Supabase не настроен` - не указаны переменные окружения

## Возможные проблемы и решения:

### Проблема 1: "Failed to fetch" или "Network error"
**Причина:** Netlify Functions не задеплоены или недоступны

**Решение:**
1. Проверьте, что функции загружены на Netlify
2. Проверьте логи: Netlify → Functions → View logs
3. Убедитесь, что сайт задеплоен

### Проблема 2: "Supabase не настроен"
**Причина:** Не указаны переменные окружения в Netlify

**Решение:**
1. Netlify → Site settings → Environment variables
2. Добавьте: `SUPABASE_URL`, `SUPABASE_ANON_KEY`, `SUPABASE_SERVICE_KEY`
3. Передеплойте сайт

### Проблема 3: "Ошибка HTTP: 500"
**Причина:** Ошибка в Netlify Function или Supabase

**Решение:**
1. Проверьте логи Netlify Functions
2. Проверьте, что таблица создана в Supabase
3. Проверьте, что ключи правильные

### Проблема 4: "Пользователь уже существует"
**Причина:** Пользователь с таким именем уже есть

**Решение:** Используйте другое имя пользователя

## Проверка Netlify Functions:

1. Откройте Netlify Dashboard
2. Ваш сайт → Functions
3. Должны быть видны: `getUsers` и `saveUser`
4. Нажмите на функцию → View logs
5. Попробуйте зарегистрироваться и смотрите логи

## Проверка Supabase:

1. Откройте Supabase Dashboard
2. Table Editor → users
3. После регистрации должен появиться новый пользователь

## Если ничего не помогает:

1. Скопируйте все сообщения из консоли
2. Проверьте логи Netlify Functions
3. Проверьте, что переменные окружения установлены
4. Убедитесь, что таблица создана в Supabase

